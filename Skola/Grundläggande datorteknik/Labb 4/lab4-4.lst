QAflisp - FLISP Absolute crossassembler, Version 1.3
(c) GMV 1989-2023


File: lab4-4.lst
FC                      1. Inport	EQU	$FC
---- File: "lab4-4.sflisp"
FB                      2. Utport	EQU	$FB
05                      3. DelayC1	EQU	$5		;Dessa konstanter styr hur lång fördröjning Delay1s orsakar.
02                      4. DelayC2	EQU	$2		;Ändra dem eventuellt i labbet så att fördröjnigen blir rimligt lång.
                        5. 
FF                      6. 	ORG	$FF
FF 20                   7. 	FCB	$20
                        8. 
20                      9. 	ORG	$20
                       10. 
20                     11. Main:
20 34 24               12. 	JSR ReadAscii
22 21 FC               13. 	BRA	Main
                       14. 
                       15. 
24                     16. ReadAscii:
24 F1 FC               17. 	LDA Inport		; A <- Inport
26 0C                  18. 	LSRA			; A <- A >> 1
27 43                  19. 	RTS				; Retur(A)
                       20. 
                       21. 
28                     22. 	
28                     23. BlinkLight:
28 43                  24. 	RTS
29                     25. 	
29                     26. 	
                       27. ; Orsakar en fördröjning på ungefär 1s i simulatorn (vid snabb exekveringshastighet)
                       28. ; Ändrar inga register
29                     29. Delay1s:
29 10                  30. 	PSHA
2A 11                  31. 	PSHX
2B 13                  32. 	PSHC
2C 90 02               33. 	LDX	#DelayC2
2E                     34. Delay1s_loop2:
2E F0 05               35. 	LDA	#DelayC1
30                     36. Delay1s_loop:
30 08                  37. 	DECA
31 25 FD               38. 	BNE	Delay1s_loop
33 CC FF               39. 	LEAX	-1,X
35 9C 00               40. 	CMPX	#0
37 25 F5               41. 	BNE	Delay1s_loop2
39 17                  42. 	PULC
3A 15                  43. 	PULX
3B 14                  44. 	PULA
3C 43                  45. 	RTS
                       46. 
                       47. ; Data - Variabler
3D                     48. Count:
3D 00                  49. 	RMB	1
                       50. 
                       51. ; Data - Konstanter
3E                     52. MorseCode:
3E 02 40               53. 	FCB	2,%01000000 ;'A'
40 04 80               54. 	FCB	4,%10000000 ;'B'
42 04 A0               55. 	FCB	4,%10100000 ;'C'
44 03 80               56. 	FCB	3,%10000000 ;'D'
46 01 00               57. 	FCB	1,%00000000 ;'E'
48 04 20               58. 	FCB	4,%00100000 ;'F'
4A 03 C0               59. 	FCB	3,%11000000 ;'G'
4C 04 00               60. 	FCB	4,%00000000 ;'H'
4E 02 00               61. 	FCB	2,%00000000 ;'I'
50 04 70               62. 	FCB	4,%01110000 ;'J'
52 03 A0               63. 	FCB	3,%10100000 ;'K'
54 04 40               64. 	FCB	4,%01000000 ;'L'
56 02 C0               65. 	FCB	2,%11000000 ;'M'
58 02 80               66. 	FCB	2,%10000000 ;'N'
5A 03 E0               67. 	FCB	3,%11100000 ;'O'
5C 04 60               68. 	FCB	4,%01100000 ;'P'
5E 04 D0               69. 	FCB	4,%11010000 ;'Q'
60 03 40               70. 	FCB	3,%01000000 ;'R'
62 03 00               71. 	FCB	3,%00000000 ;'S'
64 01 80               72. 	FCB	1,%10000000 ;'T'
66 03 20               73. 	FCB	3,%00100000 ;'U'
68 04 10               74. 	FCB	4,%00010000 ;'V'
6A 03 60               75. 	FCB	3,%01100000 ;'W'
6C 04 90               76. 	FCB	4,%10010000 ;'X'
6E 04 B0               77. 	FCB	4,%10110000 ;'Y'
70 04 C0               78. 	FCB	4,%11000000 ;'Z'
72                     79. 	
72                     80. 	
72                     81. 	
72                     82. 	
72                     83. 	
72                     84. 	